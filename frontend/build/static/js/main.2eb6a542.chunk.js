(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,a){e.exports=a(98)},68:function(e,t,a){},95:function(e,t){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(42),r=a.n(o),i=a(46),c=a(3),m=a(4),u=a(6),l=a(5),h=a(7),d=a(1),b=a(43),p=a.n(b),g=function(e){var t=e.currentUser===e.username?"Me":null;return s.a.createElement("div",{className:"message",style:t?{paddingLeft:35}:{}},s.a.createElement("div",{className:"message-username"},t||e.username),s.a.createElement("div",{className:"message-text",style:t?{backgroundColor:"#e1e6e8"}:{}},e.text))},f=function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(u.a)(this,Object(l.a)(t).call(this,e)),console.log("message List"),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"message-list"},this.props.messageData.map(function(t,a){return s.a.createElement(g,{key:a,text:t.chat,username:t.name,currentUser:e.props.currentUser})}))}}]),t}(n.Component),v=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={roomName:""},e.submitHandle=function(t){t.preventDefault(),e.props.addRoom(e.state.roomName),e.setState({roomName:""})},e.changeHandle=function(t){e.setState({roomName:t.target.value})},e.submitHandle=e.submitHandle.bind(Object(d.a)(Object(d.a)(e))),e.changeHandle=e.changeHandle.bind(Object(d.a)(Object(d.a)(e))),e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"new-room-form"},s.a.createElement("form",{onSubmit:this.submitHandle},s.a.createElement("input",{onChange:this.changeHandle,value:this.state.roomName,type:"text",placeholder:"Create room",required:!0}),s.a.createElement("button",{id:"create-room-btn",type:"submit"},"+")))}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"switchRoom",value:function(e){this.props.switchRoom(e)}},{key:"componentDidMount",value:function(){}},{key:"renderElement",value:function(e,t){var a=this,n=e===this.props.selectedRoom?{color:"#FFC42D",fontWeight:"bold"}:{};return s.a.createElement("li",{key:t,className:"room"},s.a.createElement("a",{style:n,href:"#".concat(e),onClick:function(){return a.switchRoom(e)}}," "," ".concat(e)))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"rooms-list"},s.a.createElement("h3",null,"Rooms"),s.a.createElement("ul",null,this.props.roomList.map(function(t,a){return e.renderElement(t,a)})))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleChange=function(e){a.setState({message:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.sendMessage(a.state.message),a.setState({message:""})},a.state={message:""},a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"send-message-form",onSubmit:this.handleSubmit},s.a.createElement("input",{onChange:this.handleChange,value:this.state.message,placeholder:"Start typing... Enter to send",type:"text"}))}}]),t}(n.Component),w=a(44),k=(a(68),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={username:"",password:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onChangeHandle",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"submitHandle",value:function(e){e.preventDefault();var t=this.state,a=t.username,n=t.password;this.props.login({username:a,password:n})}},{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement("h1",null,"Login"),s.a.createElement("form",{method:"get",onSubmit:this.submitHandle.bind(this)},s.a.createElement("input",{className:"input",type:"text",value:this.state.username,onChange:this.onChangeHandle.bind(this),name:"username",placeholder:"Username",required:"required"}),s.a.createElement("input",{className:"input",type:"password",value:this.state.password,onChange:this.onChangeHandle.bind(this),name:"password",placeholder:"Password",required:"required"}),s.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-large"},"Let me in.")),s.a.createElement("small",null,"New accounts will be automatically created"))}}]),t}(n.Component)),E=a(45),y=a.n(E),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).updateMessages=function(e){var t=[];(t=a.state.messages).push(e),a.setState({messages:t})},a.state={messages:[],roomList:[],roomName:null,username:null},a.environmentPort="/",a.sendMessageHandle=a.sendMessage.bind(Object(d.a)(Object(d.a)(a))),a.addRoomHandle=a.addRoom.bind(Object(d.a)(Object(d.a)(a))),a.switchRoomHandle=a.switchRoom.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=y.a.connect(this.environmentPort),this.socket.on("new_message",function(t){e.updateMessages(t)}),this.socket.on("initialize",function(t){e.setState({roomList:t.rooms,roomName:t.currentRoom,messages:t.messages})}),this.socket.on("createRoom",function(t){e.updateRooms(t.rooms)}),this.socket.on("switchRoom",function(t){e.setState({roomName:t.roomName,messages:t.messages})})}},{key:"componentDidUpdate",value:function(){console.log("component did update"),this.state.username&&this.socket.emit("username",{username:this.state.username})}},{key:"switchRoom",value:function(e){this.setState({roomName:e,messages:[]}),this.socket.emit("switchRoom",{roomName:e})}},{key:"updateRooms",value:function(e){this.setState({roomList:e})}},{key:"sendMessage",value:function(e){this.socket.emit("new_message",{message:e})}},{key:"addRoom",value:function(e){var t=Object(i.a)(this.state.roomList);t.push(e),this.setState({roomList:t}),this.socket.emit("createRoom",{roomName:e})}},{key:"userLogin",value:function(e){var t=this,a=e.username,n=e.password;p.a.post(this.environmentPort,{password:n,username:a}).then(function(e){200===e.status?t.setState({username:e.data.username}):t.setState({error:"something went wrong"})}).catch(function(e){t.setState({username:null,error:"something went wrong"})})}},{key:"render",value:function(){return this.state.username?s.a.createElement("div",{className:"app"},s.a.createElement("section",{className:"side-section"},s.a.createElement(j,{switchRoom:this.switchRoomHandle,selectedRoom:this.state.roomName,roomList:this.state.roomList}),s.a.createElement(v,{addRoom:this.addRoomHandle})),s.a.createElement("main",{className:"main-section"},s.a.createElement(f,{messageData:this.state.messages,currentUser:this.state.username}),s.a.createElement(O,{sendMessage:this.sendMessageHandle}))):s.a.createElement(k,{login:this.userLogin.bind(this)})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.2eb6a542.chunk.js.map